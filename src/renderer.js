import "babel-polyfill";
import TransportWebUSB from "@ledgerhq/hw-transport-webusb";
import {LedgerLiquidWrapper, GetSignatureState} from "ledger-liquid-lib-web";

const initial =
  "<h1>Connect your Ledger and open Liquid Headless app.<br>Double Click anywhere to start...</h1>";

const $main = document.getElementById("main");
$main.innerHTML = initial;

let isDumpSignature = false;
let lastState = '';
let pastAccessTime = 0;
const dumpSignatureProgress = function(lib, textBlock) {
  const result = lib.getSignatureState();
  const cur = new Date();
  const hour = (cur.getHours() > 9) ? cur.getHours() : ('0' + cur.getHours());
  const min = (cur.getMinutes() > 9) ? cur.getMinutes() : ('0' + cur.getMinutes());
  const sec = (cur.getSeconds() > 9) ? cur.getSeconds() : ('0' + cur.getSeconds());
  const msec = (cur.getMilliseconds() > 99) ? cur.getMilliseconds() :
      (cur.getMilliseconds() > 9) ? ('0' + cur.getMilliseconds()) :
          ('00' + cur.getMilliseconds());
  const timeStr = `[${hour}:${min}:${sec}.${msec}]`;
  if (result.success) {
    let prog = {current: 0, total: 0};
    switch (result.currentState) {
      case GetSignatureState.AnalyzeUtxo:
        prog = result.analyzeUtxo;
        break;
      case GetSignatureState.InputTx:
        prog = result.inputTx;
        break;
      case GetSignatureState.GetSignature:
        prog = result.getSignature;
        break;
      default:
        break;
    }
    if (result.errorMessage === 'not execute.') {
      if (lastState !== result.errorMessage) {
        console.log(`${timeStr} getSignatureState:`, result);
        lastState = result.errorMessage;
      }
    } else {
      const state = `${result.currentState}: ${prog.current}/${prog.total}`;
      if (lastState !== state) {
        console.log(`${timeStr} getSignatureState(${state})`);
      } else if (pastAccessTime !== result.lastAccessTime) {
        console.log(`${timeStr} getSignatureState(${state}): time[${result.lastAccessTime}]`);
      }
      lastState = state;
      pastAccessTime = result.lastAccessTime;
      textBlock.textContent = state;
    }
  } else if (!isDumpSignature) {
    console.log(`${timeStr} getSignatureState:`, result);
  } else if (lastState !== result.errorMessage) {
    console.log(`${timeStr} getSignatureState:`, result);
    lastState = result.errorMessage;
  }
  if (isDumpSignature) {
    setTimeout(async () => {
      await dumpSignatureProgress(lib, textBlock);
    }, 500);
  }
}

const proposalTx = '020000000101cc416e87382223cfa9d82d9f465d81481f5c5d83a39276b4dfc36c641e8e99ba0100004000ffffffff030b249f7ca912b420cf9883b3c5074d4cc3998dfaff2400327eed94e730e812811209171a0c9a59265bcfa51531f5bb6063d2146fc6500364dd2d741812423aed111c032dc4c13adbdbaf233298b05519f76914242dc11714d863e9290b7f4eb4a9bd1f016a0125b251070e29ca19043cf33ccd7324e2ddab03ecc4ae0b5e77c4fc0e5cf6c95a0100000000000002d100000be18f3ba66f211a9172bc62e19366807f739613973f811f27ab6030b1c10e59fe0812efd5b90d7223d7538ba60ccab8be4a3d6d4570efb14c6a73f4fc03a4833f1603743e3f89b60e8d1f8ae02ed6a9e84bb784330ab1dfb6b80bb74afc7842ca2b8216001445e45f6bf24481c8c1a23db851d4023875e1ba0300000000000000060800e87648170000002025b251070e29ca19043cf33ccd7324e2ddab03ecc4ae0b5e77c4fc0e5cf6c95a2006226e46111a0b59caaf126043eb5bbf28c34f3a5e332a1fc7b2b73cf188910f16001445e45f6bf24481c8c1a23db851d4023875e1ba03fdfe3802000000000162b16a9fd3c549ae37d932ed65ea08bd0666bf2bec297da32a3331c869a4a02d310000000000feffffff847ceb94b0c986bbb2b938904dc6999a57cbd54ca5785252aa6d9a49729f09290000000000feffffff5d3fef1a5595c8fcf44dd27ca01515c328884cd610abc93db5a93946e1c18be90000000000feffffffa481ffcfb2c7487e4d1d471726debeb7b5d73c922cb142f2c407e9744596c5780000000000feffffffa18bd7050edf28d9353061e2e8b8f10395e18a025cb72492763430e5f3961d000000000000feffffffd425af9d0057729ca39eefa4ed8eb6eb754f91192d14a5e73ca305f8cb7e6b090000000000feffffff87f80ab97bba4a1c09661a011d1fa4d3ad41e83991879c6b8e3d99c837f308830000000000feffffff3873860ba59d36336837b39e1d474bb62c479e4dde6f5d0dd6f3728a784738950000000000feffffff1624b9cd40b92d33f0ba60b0f71471b0d43e47a516ed58dc0bc173e7d75a69800000000000feffffff4222857f8b18c4af18225178a7fe62f351058fc42c9e44130f4495e6814b0bb80000000000feffffffa3bee4c9dd202bb60c8f67cc04b3778300d389410416b27d1455e9db10f35c3c0000000000feffffff831a865ad9dec7d46471e7449cf9a8fdc37a5ee81e65870f6894713f63e7063b0000000000feffffff7c1b847ea8ac74df10d018c6f335ee40aa9cb62718b5ceed1b700ce1633459ae0000000000feffffff43272aad102641e7855a8a3db2402e90ffb05bd4a25e0a7181395b6b601d71190000000000feffffff7a4dbb1b4f949a875f5717c283464f66bb3458ed207023af6281dca5a2f5c1bd0000000000feffffff1709ffeee289577553eb087270384e79596b81eb0234e377429a0cb6571b3a560000000000feffffffdb0ccc8e4a01ec3160a26e860383530f7cba046125839769bee3ba5f84f8450f0000000000feffffff53160180d58e23a1b4d450580971639c0a632bb1acac053fe69fbf2108cf645c0000000000feffffffabd98c794bd512a8a65bdfe8c411f4566e8a7844a0affd6b431507391db577ab0000000000feffffff4d1f4ae118020a0b4cea18986398b55d267cc1bcb403eb873a26e396213bed050000000000feffffff9ae758d4ae77f8ebbaba1431db0ab6e53b43f8e93a5d14fc2646d1fd4688edd30000000000feffffff6794e784b0ef5fbd6b2811fc9585364b3e379bc161c82c3ce6035693c1df11750000000000feffffffcfe24c4ee9e42922c8fadfabdfd3e21a5c91505fc4ec552c36f4444dac2e9ef20000000000feffffff707114ae61129c1f3daed73cddf1c40470fa9019102953173905792b9a3097980000000000feffffff9c135eecb7b7c50c5e84e1abe323e96078aa697a81ccf6b81d3b9f5d3369a6760000000000feffffff31cd4600b0c368e16cea0a4cd850788af7b78d3349a4fd101632b8867cd5a5c30000000000feffffff4753cdfb050fd633d7c7097c18bf2eda6446a075cfcfe619e167e351dcf87dd50000000000feffffff4dbd43a09fc8a78a1aceadf1ca0c42854c971c7b4b4773ee5afa41e6dec4721a0000000000feffffffa35c190ce245dcb0fac1ec614373f46e754d7e82fb640fec94730878eed3d5240000000000feffffff27061f65ca96d6426815eb0d7b563af4d1c69536fde1aeb23b5c078b1e537d320000000000feffffffa2f77bbccd69fc998eab99f0e46543124e93127e53ef422716d6929dc940a5ef0000000000feffffff134e7ee04bb5f74734fc10c0db199896106810950442269e0a5fefe8a2efd1f80000000000feffffff4217ca62c16731b47a14674dc149923e2c2a1df96203255501491b33d3f7eec60000000000feffffffb4f7f976c918222391d7311b9f8bcb3af06bfc66542c38c2984f2ff7ab6852b50000000000feffffffe16ab78cd2e7543834babf65f8e18cbf3dc9602b0b3eaa8c0ac9914e68c7e91c0000000000feffffff5bc2314a7897615a144601fcf71ed1022ad60e01e8a4ac3778f0a7cd858fb3110000000000feffffff0bca52b750d5978749c8dc2b0c76b293ac95249f2c060605fb980825cadfc0160000000000feffffff093a97a4112b015deba571a09a081096dcdafc0b8eb0add1548f34ffa741bbcc0000000000feffffff2fd702f440e333c0f6e9f2ee37f9fc3fb12a823b4421b6aba23b182bc25de5910000000000fefffffff50332ad5f8777b95a8c9b1e1b0e0f88f4535fcbae36f2bebcad97c0d99c5c650000000000feffffff3562afeec889c49aa1f5792bcbe922248e4fe3fed8e0098e0d6154ef40861e540000000000feffffff0631f1e9b3b1aaec654738c3bb92dd11432b66e8b58a6ea0cb2ca5a67f5a69520000000000feffffff6228e893505ff69ca408502bdc75c57bf45189afb7c397114e7e7562578406030000000000feffffffb3399ef340045fb658ebbfc60840f50b66740b0bd003c9813976a484275fce790000000000feffffff9b2b4977a1e62139fa9387b8fcbc563ac115760a9eaaeee786750ad9e721398b0000000000feffffff2c7d32ae96494bcec8773278a27ad2b5d870740f638891a4792b81577579ad2f0000000000feffffff1e28f65b2159944729ccc7baaa4ac3d05f041d9e5b997d6aa51d6183449f823b0000000000feffffff27b2ad888ed210de4c5769af6569be598959f5c1154adb8bf69712f8924014200000000000feffffffe8ae8bd5d46f0bf54fa725c3ac47b5d03b4b1f85213076399db34cecea68e2a70000000000feffffffb6e52b66a086fd55cf476e74cc985673eda611709f4c5cc590283c1d1424b8570000000000feffffffd069b7822b4f3d74586428cdcaeef03b4e5a522a7cc6995e75b4378cdaa630740000000000feffffff90631d49089e043c546af1c3da6eecd141d4888c5b84444f5484508a822052a70000000000fefffffffaaa882ee2d7efc0cd0098c2a726a1ae7a8b5d1a1e5256c18ba79cd0061554e20000000000feffffff487ca1e022fb485a879001f447f1e4694b450f6bcdc984c5d3e501a3f2f335160000000000feffffff236455e378c2c09d49735d54729955e32752a4c53d983cb09cf16b7054f6f18c0000000000feffffff2037d2e6fdc4a327d3347394d847064c82883c5555b0ef9ad15ee3005a999d190000000000feffffff129d7a1152c5935673123289069b767f60e43c48c73de6a660f9d688b8880f300000000000feffffff9262adf668182a241fb9e211fa9ffb7ab03164466a9408538e7abd2c584791300000000000feffffff59d19797bda557fafee11486810e2fefe62db96cffec48dd9cb65c224a7dd2ef0000000000feffffffcda0c46c1d27777d93c865d5b7e982a639f24a30102c6492c47e83eba2f5e79c0000000000feffffff20e6282a7553af9c0c3ca28623caff570608a997b668064d2c70a67867d64d8a0000000000feffffff61821c062a84394a235f6d450e5de7b8fdb693084ca18ae8f1bd44f670d8aa2f0000000000feffffffbc9ff373e8dd2887055802ca27f56382366121a44f03508bd04e5022c059b4700000000000feffffff47d59639cdef0f71d7a3c8a0755f832d28ad689d7abc1377309b533dccadf2c30000000000feffffff845377fcc3dc039e628688cd69353ce494136d73dce61d9e28aa46f8c87c19100000000000feffffff162d48866020989d7b5e992136a568d29c40e8e9e8506d08d314de485cf227440000000000feffffff90b438345cc611c3910791b0ceccf3aaa34db3917db0148774897cb5639833fe0000000000feffffff3336d09f5c5adf25575f1c9b633022fb177a940218f1042c0cdf0abf2c8bd84e0000000000feffffff43af6ee8005dd355b0fc0478c065b2a4fb55e0cddfed6feaeed89c4013a23a300000000000feffffffce561592a6f14fb84597e98ca02496e7bfae80676b86c5a3220f2bc19eac40290000000000feffffff3e60604e68703bce78eb099dc24402de123891a84d50991fc7a7392716897cae0000000000feffffffec318e6fbe30cf502cba1d970385661a98c15f2e369a20dce3e53436153c008a0000000000feffffffaf348daaa9c6eea99f2dc2c3f7bb2018ee0973723e5a041537c682fffb1ec7050000000000feffffffaffaf440ba55aee64f5f8d5bc56eae31e401c975d9ce977bc5434735621e86e00000000000feffffffb840fe9d8caeeb27caeb27cd24a70c9c7636da0075378ca6696c9697aab903980000000000feffffff399795d6d80bc0e468c58d263313bff72f0b5870a59578064d6ba484ca8b0a310000000000feffffff968e05f14b27bfd0adb5647bf5e03aef917362fcb14713e3b487a58cbb8143220000000000fefffffffaabbd488069b72994e2ecb11ffa0674ad041985001722ec80e5383c98a4510b0000000000feffffff07d246e1c260fa6871c0c98b3e3783b25ebb5d75a78aa42904e69e26829c86290000000000feffffff514a5afc6d2596a3a37bb3d26a5a5416ad3d35cb11287b687de88df9176df0a70000000000feffffffc18f88a1f11e2bc07a6d7ba430836f597b78e815f50212db6d3e5c0a4e2ec01e0000000000fefffffff88362aaba7db3f530642f1d438effb2965cbe31181173918585d5a3db4f57a70000000000feffffff3654bd3a76902c9dde575323e293e8299212c7afe2503474148d1d2e26b4e3120000000000fefffffff984e118391a4df87d9f245c2f135943d7369bb46faeaa65bc6a3d97e1ac653d0000000000fefffffffe8e60ed7bb7634c8d552cd8fcb207c63b03a57c0e07bc0d27d7bdbd264155410000000000feffffffa935591c956860b77b9be96114120c190d36a84ca87e5375a3dc18b0b3899d710000000000feffffffa9ea2eabf0475e66761b68da1e666d71097a9d3e37ff51c108995bb1c84461b50000000000fefffffffaa3e0215e5a62f1c170bb2db658de4b6a38e87fde8d84dddfb125e77c766ada0000000000feffffffa592eda7c19fb8637177357b012877c64260af8cf438b328913c7d228f1b52e60000000000feffffffc201f015dc3d1e8882aae20bdca4d62629cf36537e3b37ccc22632e434d9e0e40000000000feffffff917687e609fa8d6ee150e085f4e2dfd9989611a0195fec2df82c1e4bc3d68a360000000000feffffffab53347250aa09d2a7157cc128f158cfe644abb465dc461715804b349887671d0000000000feffffffc9f6a3eaa1fa71c8e0999e105bb898ce0d04b31c511fa1b34b51d9eee287e3310000000000feffffff6efd27df9bc90d1460d40197472d245fc8140862e246f59031502c7ef9f7ca650000000000feffffff78ba2f9fbad47d227ce806cb50f8a59f992bf404253b1fb1942790fa77e0adb00000000000feffffff9532520648e7ea16cc0224659d53919131694c64122817029943dee67e2db4670000000000feffffff838c779af18bc7cb30cb8f580690526097403e7ecd8fe104b2d0349f872c67210000000000feffffffb89ba942b83043fb31b7112dbb9a5c4fc5614650bdda0537af35ca23fb9bef450000000000feffffff02bad4930200000000160014f26b3cffd614c3a043e8f74bdd75b9b61b97e6f400e87648170000002200204ecb96526ed28b19f3ac2f5144893038d336dec0485536062260173a5e607caf02473044022042ccfebc3cbd79da84b04d1648b99b88d01ef0c431c6fabeadf75ee871f4cce3022002bfec08459a9c098e0dbb3155cea57be3c4e424c8ebd1029863dd96f53f0447012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe802473044022051fa247b80bf6a704f5ad5a507ec727c3ada16c56bce712492627270312f20c00220338777a3c516e16a935cba2cc638e394ddbedb0df7daa4b05c2e923d85d5810c012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe80247304402207beca300a153959b0be68d075efbd9d029dbb2c061b802437e6d9fe95bc721c40220352af21fa34b588f52d7b48602af39f050af369bc63e9b3559c4154e1725093d012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe8024730440220648aa550f66e67f26421e588e2ed4f16de883214cbd693acc33654bccbb12e6a02202465b1a506fc42bfcb81d2a70c0feb9876aa86f5ea60e9248aea68e7c7890aa2012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe80247304402205c93a38cde8f23df779c192dc97804bb28bf9bc807d1d1fd1f2eb8541c9531d602206dfba0f58d2fe963f7d9b2a5f5e6b943c933ea563e3d5756484b8c51626a52d4012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe80247304402204a3599e5e4ca4bd43dce118426efe023f27abeb939f3fabd009b6483719cbfa70220717946bfe65b85a98f969442c1eebedf65c759f524df62ecf9ad39097e519c68012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe8024730440220057144283216bc3b61a1cb7ba94a38f285c6d54adaf00683d4eea48caffdb3d002207116d94d179e39b963dc8749de72ed3cc51700656e81a3e5ec44322d95e5af8d012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe802473044022043bdbf1dc4f51638cb1d5b2f98a2ea31ba3767e9ef72c97771a0cb0b19cff920022005b190a09dab639a9c148fab2af52bffe306b10e0e16fccef389e9a5723cddc0012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe8024730440220282f85459d37c7bc9803523b6199375618eb2a4d0e9efa872e00a20444a1e1ab02203cccaabc18b15d18df138c706d27c6986897ad5909d0bf0cad8c434144e2e899012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe80247304402201c79faba96499422b93fc4d2bfd1a3f32089c96145f54429ba136d8d7df651130220434641b9de00a0c4062de0b66366e9859d5695e6e03eb7bc0528cadc34d4d45a012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe80247304402204d3eebb30f3bc9a2205f2eef7134bef27ab1be85529b2eecd0fe784e09c8842c02204ba80ea18a38133aeab004ace9960b484d30a672c189c8d253db30b37cb6c145012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe80247304402207423c4fd88178d908d6c322fd18daab9a034131c7f16edc4fc15b0d0ba0547da022070bbfb2cf53e6dc5d40b955a3c73415d7446e9646285735737c6646f671599a4012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe80247304402206237e3588c69f8de12b79efd272597085b0e249a5027a5f6f8a35975ae2f1e0502206eeb124fb9af7ae8808dca3303c1d72335f9b2adcccb8b0c73098ddc2ee03e4e012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe80247304402201265c0b2b5744564dfb0ab21e603861f99a5ef41309ea397392c11dbe4a4368902201253b7a0bbc80724facab14d2cd43b442fe4d6c93e12c0563dfddc42f3d4f62a012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe80247304402202644e7e92e3ba2f68df8d0ef55d91d98429ae6cb204cbf183f74c686ac7390b1022055f1bdfb164a6ef139430ecc222ac4809b8632d058a8db20984bfd8c4521570f012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe80247304402202882f4bb440b98c586d55f9f3efd81007a7dbf5d168480bb7adfcddaa7aad8bd022003e3a3fc3c3a42810ddac86683ec03d3fec880e9f1dc2c3c4a87c6c1ea333659012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe80247304402207f21e5ca6b105d4388a7d8f38ce8f4bd9a527fb95b8294d655e3d2ff8757bf3702200885e8bea564fc327a38d56b5751036e417a75a9edf1430ee9f478e4424bf934012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe802473044022062d2dff780fd4b0e0c3350cf2e3544ac5e98638275c58e98208544315cb51afd02204ced9e4b4d38fd6f798f73b71dc77d349d369f7611be5d36913414c899c62b9f012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe80247304402207fb3e4ab71e6aab5d9a801db04fadfc19d1229c2dc0ce8b0f1c09cb14ec315c102205a3450db3ff8f6fa44e4949429b7812b67f8eaabdde3d49030626a85de308c7f012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe80247304402204803c5e4730769c1818071633f261876798df9ab352078b30ab85eda676036cd0220514b8b5970d5d55ff20a797c7a846ce3f948b309b16d05b8bf2ac949a8842b1d012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe8024730440220666bb16631cc9147f15da461ebb3059a3494a7bbfac6da24daa7abac4b50822302201331d8a2e4a723eeed2e53b6353aa4048886156b05e4417c6c40feb037fca34b012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe80247304402204107c1de8139cf69528263dd3c0a878fb90382cf22a6c1c007436369cd9033dd02205e1a324dffce68eb7c49cc335cb3e0c54d67bb6eb77ddc8644e45627aba9155a012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe8024730440220728d02e85c43618779df33cbacc89a92962ff7584218fcb54703ac6bcd8fe28b022033aeb438418a64f842be53725f65706c9db423557f8acaf07c18fd0186389665012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe8024730440220649bc4a1056b61bacb95631f88d4afd8b65bc056cb81d7817daf8d2e4455cb34022008097f27886aef87e26d2595eaff17339e38d36d66575cd30f3186bde90f05f5012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe802473044022012ae0a82abe16f9bbfa3312340d5aaf0c0e26b1a6481963dbc4e50cb6e97e90a0220124d0c41499c432938fc914519213196d1a2922493c039532d8e46190f0ec11d012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe80247304402206127d5a2f456fa84da50e23a1d5b0a24c0965751db44e6ee20fbb4fe581b202e0220271214abf21fba202a7d3dc0fb8147660ca43439980ec20509e01ea0dee54570012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe8024730440220733c06704f640c6487508a09a0dc27c794c40477e3353827095dcdccc977ef220220481aa03fa0a52b165b1587f8251920a3aa2351af233c3ebc079f067a908ca756012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe80247304402202cc4a812b3b3e45fd426cc2280bce42a1e61bb0be3d9e3631980ad1872373a1a02200da0f871158ca628f9f80e5c8e2469a495333032a93a5424a5ed3fb36bba6d0b012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe802473044022018aaf940ca8e1aa5b7ccf720abf86c35ded6866237a4dbd6498e5760d39a440e02205584858e54cff36b20e47d46eae577859cb803a6f1167c3941bcd09b257960e3012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe8024730440220601df606179e7cfc364eea676138ae480791ef51f9cd26239715ea3f79e9b582022007fd0cc9d6a11e00c59c0dd6c2e40327d0bcfb83f6384a91c5eb7d06ba39ce7d012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe80247304402205d777f1dbfda4a0da73df9daa75c1bd20676edb47242cccaa133079a935fdf3202203a7f4df9a5bb51dce704d12a09656e0c6bc32285e1c7aba2daff172539169192012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe80247304402205e2a3c11279074fe2ddbb2d7fe197fc6dd1cc2d67dfabf0be55c2c7732a5d98d02206fa617e78d9c834f96819652f134799d3c0aaddaca05cc0942325d51284ac472012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe802473044022022bd5b4be7a6007b1b1350c5bc898dd732285e9aba4665b0da3cb141a0b963f0022021f02b51ec9a6f44451099727aa10d2cbb724feb44f7e2356d7349bec4d0cda3012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe80247304402202cb28549b410fcbe9875c5d7c168603934d7efae352639b4d5f6fb6e7acef22e0220357012acdbf688ec758c9ec957f3556c98af17c678d0a8c71f72a5085d275d9c012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe80247304402202cd332ba21692b0644e660738b3e86aba8cff894e62d50c8b639964120b004de022050e7d00c5c4d9981f6130c5c9da49d2244ddf01fdca8b852ef875a39e274b501012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe802473044022018be4a88ff79815769b23c93c4b967609a6652c78d1df3752a2c0d8aae6631160220366abadc590403d0f69a6c09821e26259e2730fdfbd47dd6861a651257e564e5012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe80247304402202758e4b3605838a3828e38dfed24db9779b803459bfe765dd43b15962c09d6be0220476031823023245f90a951a1ed80bf73d654f7548fce74cbfd7c1a531217a9fb012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe802473044022055916d5349b70b447e1a357b8d05bad7f36f7f01f063321e46b949913186ca3e02205f886d6ca191d8c2fc1eef0e4f5e070a1283f14fc3b394c03ca5805a4e03ac86012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe8024730440220490f5928c50d3160cb8a0925eb880aee43040d8c30343910ccfc5c29a448f5df022005020de940319d4435058bceb35b59db9c3de496157a6f5e55f4ea705ad58160012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe8024730440220747d6998b9acf12bd8ee19900601ba8cdebd769a6d4a8ead51712e4e1e27e21f02201df4125bfa6e2ab1679e18f0240a4266413cf744052acf98bf15aedd8d1134a8012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe80247304402201bc152260c1748dfaf1068ef0c58340952a2e3c84514c75f722981dd1d5bea7c022033d009aa41fb7b97353c0ab84c3840e749457aec7dca8b02a3047b70b6f57be5012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe80247304402204c4799c9ace62721c6a820c169f8a08bd1f16f6b5f466c1bbed0c820153e60240220137d918d4c5e3b04ec90e15cd8b6a7c373805e9b1f99a1d70326486e22c2ee32012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe80247304402205bf45a6533c7331f7aab7c0da6f16f1266065d99edbbb237441ff5bf3f26b798022042967ea0f82ae7721baff651cb603e632002102484cfdb68bd9c88d5ab761e5d012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe802473044022002027ea793bfa421ca13b46c49d6516eadab71275b2ce814ff4f55750780195c0220666ffefefbf342235bd3f6711861536699aa6114b4ae4aa94005b1f89a5f6407012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe802473044022076d85602ec0cd9ee9a84d14cd09308f520a33d16573399cbd3fbbc60ed7d8e0002206295a01b22ce2a3ba8530ef71afd3f4261b1fc5f5c3226ea74a3a0d040d099c7012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe80247304402204d26dd3dfcae6a118499db1ceee0753dc2d8e27b26c237aeec5fe51410479eb6022013b09312305f3da49fc7deda8f89cef52eafd497dab2bfbac9feee095b5964a4012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe80247304402200df0f1dcd3d6ea0bb9630f595ac21f4cffeec27b6bff92a9a54b9a8742c41a5c02207b3558ff6c7fb414114940a64392ab723b5d240cedbfbd7b40c25d1010d67a98012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe80247304402204fc14777cb96ed989b29dfcc2aa9e64b511ccf9d397a79f6c998df7b1209f5e802207e4f914f6d1e4e517247ccaa86f256a6f7e95d4591639a3c531eb42753605650012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe802473044022028380f55676e8a878c6ec76c5650bc36ab838bf2913f6bc4e18dadded14a406e022050761b588b592a3f062aa9bd99b3107b555f8ce270829f146f10e750ba22a614012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe80247304402204daae11215b7bb3586c369a7a0f7016251cc9e261ca2c813c59f8b00a2bf4026022070f6331a3c0e5e98d1f045375ed5431bbdde3afb1a586291ce8db983148ffcfe012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe8024730440220534bb81545a8444355b8ac90eaba0641356d9cbb9780d3ea2c7e6bbfcabcbc2602203234da72442b0d454f571b1b4beb110ce7f6e558829d71d8973d8c3ce51c2532012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe80247304402205b84bec4571438ba749daacad3e8aeabc8008c5d1fe4db6a4777e92e8c42ac0402205e578e7feda43aac1f0476b4a22ddeb2c7cc7b3b8e4272a2504cc56b244c6e96012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe80247304402200804db1e39b11ecf64b19de4de851b02e291edf92262fccd267d4f97c866e15202207940697c394aba7c188a06ace9df39d10669da1014aaa022653fc7581e5741aa012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe802473044022044f31b8af091aa907f1a00801f03858d579cf6df03773370c7adf2c2926693fe02201f6eb505cc662756b34fbcb781de8dd66f5c306ae08ef27916b893b2d575217e012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe80247304402203c2eed5901e224737f7c3460b56f36f4a9fa5078a15a3fd860ca01111961ff4b022027a74c1fa067da2fadbdfcdaa1516d05694d0c8c4adc45c25ba4c662713bcae8012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe80247304402206c2123653e380685a7edc137043f53a176e8e29f2f286e76b0769c2c9cf7abde02203a7010a87d0330c7cbe5771e7e9c7cc356a2d62b121911359b4cb07d2cf958bb012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe802473044022055ffef633fb808cdb0bded0f255b490af9c82758e0987e33f3e100c8dee1011502201f116874729067c118d017ca623dafae326e23e28f7586f6cd6f869d39ef71c5012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe8024730440220257b52a6fc98212663baf0bf3058260b47873655cbb59e65764dffacf80ed29902202a9a7eee05aee0fda4efffbb2bbf77289fcc03b90229ac8b886fa73801d2842f012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe802473044022063e2e9456614933bdac0dcb215399d5fefe9cbfaf05543e8fe21b8ec0a4ace780220255abbbdcaa151f7146021c2c4e14239d9ed81aed111d797f2cda4d3428caa8a012103ee6187af51484254f6a0fa5b733ba68884798cb3d3bb7cd242f0bbb9831a998702473044022068aa9bb03aa4c8f766c05e93c8b7232d0bd730df1b19c8d0835301e072053f650220389ce3d23a41de7df2acb666908ff2e02c7e9a847d5ff6091f4e28be16b60a78012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe802473044022035d8a318acdfc1d6824b960c7d2ced33faf4976c65e7f0796e559ab4c0b2737802200323736a064aecfe24a68fc06282de56c0c863bdc52227d2c132e0f8cb3dc90d012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe80247304402204b95e5b449a46332d4421eb8cc82f8f51835b0508c3a5826ad0045c30ab3ae99022039d294f1007c356dab38b3094f77155c521c3cbb371c043d7adb2c45376732d8012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe802473044022002e948701981438e6ac572b565548f2fabb85a6463deb6cbb29a78762c1676140220296f358f9c9461b53d6b3aaa354534b039e0ef1d07b5d5298755f7a9d9ecf0be012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe80247304402202103f2c1bb12bd3e42113b81a80095cccd337f90b9b05b268194fb2b51a9d93f0220399dcc5f0b419f5a64a98339925cba88be0c73d8ae3a14ccc9bd14387e3f228a012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe80247304402202ca1eee0f67713485bf7f6d5db772e729c8599eb6e9e446f4deb4aff05fbd874022005b886f7420abbbdcc7b4d2e3008d6e33ea19e8140b9145af809dfd17f6ca316012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe80247304402204ca767fffba5d03dd5f35349b5ef2464764cdb6e46a0bbc8abf8f5234375805102200b469beb57ac1c6ebe8a0c9bc6f7a7d54063543c4b79a241f3ec451d5ca4c158012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe802473044022062787dc291e1b4633c338abb395854a3f93e451b2a5d225bac393f8258a5b29a0220766e62e7d530358181105cf88ed7f8018314118eb55e050ebf024462483de804012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe802473044022026a559d2c5f06a9be0c2bf0dd4cc964c4f11bcf3b8c43c5c91402e6a5ce495ee02204ff26aff133798b04c711fc60a82abe95cdc448385cd397160783373b693c4c2012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe80247304402201924dfc28c03b1d4ae2353958e4550aa5a3084b24f8666e34b5a7be1e3ba12d5022013a197ca23121276b177a66dacd0bf723ecb91660d10a52ed7bdaf06d64568c1012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe802473044022069ccc1a42c0c92a8655778f5a8f4806c857e745b81ae4457e0c322d349f16ca802205dc7755702710d49d71b82d7a64cbafbe865af877ee68dfc1f73b3b5986cd731012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe80247304402205923e982cfa2888e21ef7552bf9dac256cc2d032e4c1168a89fab0352034741902207104b573c53c3fa123cc023d1d3d944fe2bbc5dea990a8453dcdeab53e4df402012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe80247304402207511eefcc5f1c4396ced98c794595f8e8fa5379f6b5aa37785217f857db3a49e0220310d33e73272080f704e90aa17eace06fb1e7adecd3220fd3c81582703fbb59f012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe80247304402206b098f20316df8180ed37ce6980ae641994405cce52078bdb2c004a01670752502201a8e67e6dfdd693b68cfbfa00b5bf04e9925265522f309c2249896ece5eb7246012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe8024730440220012f2c1c185118d5c87868343d92c9d2627ebe42c18defbd4424c8676520b0c102204e011d69276c5069d94d32c0a74a279ade78d7749a7f3ac4ece4319980bc6a07012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe802473044022041133f637cd241e97762964f98ce0fd4b30e1d0dc0700c45ca04f35fe0fc50030220309ac634b15a2668557b64410d916510deddee16686921a665000505edb79eaa012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe802473044022047604511a60e2efc0aa3341cb6831a56e52feac45237fbff7021477fb04caddf02206ddfffc863d2af7accaefc66ea73150b776c566b1c7f49e985425124db374278012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe80247304402202c8b15a60cdac4dcf91a8541bf0c8d756f7cfa993aeb2197a62ce4aefe31c60f02200262f5732d3dff96a0a7cfd31bbc201da8d99c9bf09453f493b9d11af45e2d10012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe8024730440220575c4da0d284fb0fe29cf5e2b49c3f5874573e8874b0b0c952d393fd56ebc94d022008a359e192fde5cd53cbde9c8afd79dba1ad059056c0509185c907bce6d0a612012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe80247304402206020810b639655677e89a4bb71b9026381bf2f2574c92273d44f46a3cf2c21ed02206196453e17bbe07fc2a9436debdadc621be4ca58f8951cbd75b8b28f38184dbd012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe80247304402206f3fc1d1255b3f597eaf1b7765a6282a9bdf6d2e4a150a4f0190abaf6b90d490022011b6249cce77dc53cee06d79406ef6120f62bb90dcfe09ea56670e3f2e81c65f012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe80247304402200b48b3347fb308d33384d8e8c30b65014984097e0d16a1817a84b1a7a5d57bcc022071661e86479df35d00ac124c4032a4eb81f9d99af6ba1f87d96784cdee40f4ce012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe80247304402201eae865120d7a6505d2b2fc7a0ae2e673451e650cb7b09a2d533305a38be2ade0220655d15afb0f4c3cda02fa5bade5dcbf7cd560b4412dc0bee1ed2c0e8734d2e00012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe802473044022020130557421b8a5c43436b7879d76837ea5b4ceb63c7b0fe5e55c6db4655ec05022031ddb06a9307776d6f8b575f6538815291222e2c1f07f7e2b9b14c8651982e0b012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe80247304402206eed285915fb9917bbd834a0e7bab8abaf7c3507ee3fd9bce3ffbd07623d4a0b0220174b13d9748dbc1f36074c80bfae9a92d56accab9dd81883f07c99166c6387ff012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe80247304402202cb776f03800a3e1694b8f07308f5c9529ac48e0bd897fdd3ed89786e225aa5402202797e754855f69e12f7d172ca982f1f53268eba382e734817ec48721b207aa1f012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe80247304402201df427531a57adcdd0c7731b8f5598afd8693e1db8d6be30889b9d8d49426c7702205dfe74be22c33b6e1a9b76f2171a28499fcb548bab7994705629062e306ac700012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe8024730440220333a46ff45971c7adb9156ef29753c0ab491e6cc15188c6104b0e3c51a952a5f02204caada0c403e34e4cc7a8f6b907ee1e21702bb2d828badc7979b9372171e4066012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe80247304402204736003cfca3bfb3ff7c115c7f4a4f89dce89e80605e1fe9a8e33a67e1bf8149022035cb01160c5705b6ccfcaf7ce697d3cd129e02881c852a795c8cc3bf3caba1bf012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe802473044022032bf1ba4e5e6a51eadd5777e8e2170c62c61388f70cd40203efa7999f29e72ef02206df08ba37b2110e13d1e363f1e5f6d700b1a859fe1ecf498c61f07aa62074bf3012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe80247304402203fe38777e2486487742a29aae7be56927de7b7e9c0ba850f57cbd348705f6efb02203075cd30ac7c6f63ef8db3acc30cbe9617c0fd7328ea2029eea988fb85d6ba2e012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe80247304402200d33219eff8248000fa86efcfb4d3d8761bcc0abbbbd4efabd0a45b0b2a6cc4502201bc7ed67f53424998c9172b834139009a6737f1fbfeaf41ab73b1253628fe9d7012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe80247304402202382a4d56e34a6607d37153c3d4863d27c9ec37a4b4abef754388c899b52083602207e8aa8cb740ff4b0310fda8b5d0887d0dbf71ca8c725b0adcb3bdb7c845dab0a012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe80247304402203063c98afd68771fedefc36308cd34a1da3cd2163253f0509acea8551ffb0851022024e018b1b95bd8529adabd899f12ebc3c1001e9c0eb01853ffdbce5f0f853aec012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe8024730440220573eb0bc6c6bc61c0c585523ce024d50228b57c505091b20cebc5bf7d7094cca022066abc8234624834db1a8bbe252b407860419a527855c1f4b062e461e99e32324012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe80247304402202e2117e469e888054d2fe435b9ea2820f03ceccab9fb138426b55732db995e0602201dd2e0ecd12b93ae8af8ee15a4f9ae121632ede651ea2a0136296111125dd1d1012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe802473044022006c7b660af000ea132416d93e59c06479d2d5392ac91a48e8867fbb1b26723b202204b7c9883c728edbba6fb97c2d615e42eab64c3bc77055d50286589648fd4aa82012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe802473044022050882ce8774198a0fa10f95e7281593bd0e9abbb90a0a1fc4299d00a4d6211f20220285ae7a9b4e542a07d8985b04008cb36b58dcaf79d80cc98c5e8032caf813f7c012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe802473044022064e856fae64a9516e2fa1814b8c07466b8b6929e4da04eeb8146f0aaaf17a60d0220409c364ee7263420f7a598cdf344b1ff9b1cc7aa5da512dd8261248cb5863dee012102481af96b05f38e2ad6c8430eb9e27a00384c4b2ac9a8ef3d8932195ecc2abbe8000000009700000020e77fe209b8a51992ea64013315594cb3888b60f707a58e77e95abaa79d75d31bc5938789e01c71509512719b1bb697635ecbee4d754d59aa8274358624db509134acad61ffff7f20020000000200000002c5478d32402d0d9c5788d479ef2fe5f676118ebe04aa635818e7344c91125189cc416e87382223cfa9d82d9f465d81481f5c5d83a39276b4dfc36c641e8e99ba010543010001593af4f3dc72eba686423b79c7339c6e318a33ec0fd160a9d8dbf7264ea039b2f308e71dda0e71377aec6a354317e8d9196a905a3ecbfb53ce4c1b93b54b6404fd450b4023751c01dba9ccd67544834e42dadfb1e71f158a4128345da1d4d46f9cd70607608f2e45c1fe1bc10a3dce2ebb3cea5fcb54284aa34e0875d11c5cdc0456ff6acdfc01ce6400b8b3627d0c1a21459b07c743ef9d357018c7e6d11a9d2f729e7d327d014b0600dc43fda078d40f173b38b7e1576ec49b410b1bdd0ffc95876e93ad7ab680d7c0267f2a7544d50d3a0c9cf242413471a29b37710ed13e97d48163162736c4368d1c852495b57487ae7bf9627cef2df8d5d7fc59c7ae27aa1d293615f221e1b2b46afd6cd448626ca7a93588f10faf44b045103103923709dd2902b3705899fd02ddd7ebbe6ad702064c487844c7588a11cd9c348a4555b7fe11be3151bb786a9e427e03a3e08d9a25d04f73bf26116bbf3d520937325138bb4bc083c01b1fc096f13d066f34e6f8166f721b4955e5016a21c912bc3405c4ed18edf55c650be3f6f96c454a58cc6913321cc3ef044ce14d108af457f2a2b396b5e2f8b08cb857e1e9bb5b88ea3ec9ac11f4678ba57e0c103555b20f14c1b6acb39079671d5d953457f6a74b7999cc56cbbd535168aa06ed4d33d09c59b6c3532e9caddac0bf27687c7a17427d531ab6b98918332669a9035d750f54af0ea4031a705dc0602b5a1437ce4e4aef0687529aba56139096eef8b4740bdd4b7a124e5145a75bf97d0bef72044182be3535e3223d23d7e0c14ffec91a3ac09346c09706d56d290b0ed7ad1b8c42d401aa2386ae9aa30456f9087f2ffa26ae28e4a17ba1ebc1d5a3f64b11b36e180ba844897e256b0f28836f8dafae43720e696fff97b00c441b4ff6d3b42add9c3ebd9917eaf2bcff7794d5144ba39ae5a660ea97eac27565dd68042bbcc2f3445278dd786cc33b1d252a4a69db944c78ac9a394bc5cfdaffc4e5141c945575cdcc6c2b737811ccc2f8681ca3a491fcf42505cd6fb29533aaa715c466ea9d3b3e94b4a3eaf97502d877d282db9e44f7e825e80dfa430354a671b92f9190b5aed007fbfef5cdbf0d7544617885cea51656fb205a8ce2fbce662c3f01d7919b85cc2979b420cddc42119a501ffded1233b97941bbffb5489c0a593cddddb166b1fbd35ac32b8785d4bbb9ef9449edc665626edc8ecf7274c2bf445d4119747564d8c43c9dbd5e9cca84d9faae729a79dc916c498bd6bc4ae11f11bca4a356c98d356ad956785d0732be432a31ba1bbf74d5a1fa7df42ba9bd1f513862b3dcb76a76408048639c47f0cc8e608f57e3a2c1d019cfaf89118b9f1ac64575478425e880d133f9429f1b5a4bb578a06ad4ee17333b7069e1d80294bc794447e428ed0c49813cd221e30d1a58d3540c2749c69328aa9e6d3992246be415eeeecd180637c7811e185f909edc1c0f5f2514ef7211ce0b38f3c1c1f034a54790be9cbb2284669ff17bd98a12da51de79250c98880d6faf9eaba4d75885e03d0ee8f0c46152ff0307539c8c807778599c1c21015493f64fd1265527d83d58fbc97bb1c472ddce0b9ce03c6af0605e7d672f61c8833041907c3be299d921481d66c96de822ece6de4246fdfb7f4514d96a0d7c963461a8c9400a7f4692ba618156a58184b2739a1aff3e8c15b07998634a9c65cd3007f8fc2f8f593f41f7f4ecd654fec06aeb9a53a1fc0eba9c73511fc000a82b115ee7d182987ae6ea8de43356171cc51246c01c1ae92265eb74e1dfcef4583176f1cc271a3250d34e1a7037435d3fe39030e97d4b294fbe785ba99db5f77b8f2b82699400d1c665156114aae08ea6285c8bf7dbf06a8e6e949d0f6aba8df22f747d8bb414207a0a5cc7aca295c0beecb93fd0ae46e0de9579fa257603e014db97cee4236902faf335b6232f9fa133a60032cb55b16b64fd55a0f78c410de99a26b9db7e77b03b66a2fb9856c7cb361122dc04676eef30fc0fa4cb2e00703266b5e7016bb529aee7d3bed7e494faf9df43c2b2e28003958f7dfd614f72d237524828e44403df91d3bd81a48a156dcd0b69e0ed96779bc249213e4c7fba2d2b05b84bb035764cd8f5e3b520755e736ac2d25e0b4d2d4b44bcb4ae8dfe17b1f6eba8a11f9d06e5f97c77b24ff2efbb790fe15b5e25eafbd067717fdac899e2d18a6a2e0a0252b810f406fe20e67a865456ae343883a734b5b765785b573c757f650a6fa3db84454e2cbf2f94e5e6fcc259369baad4878cd40fe84d592397f875f3d932f6c39daa22bc72d3c6c94aeb07c91b44d34c0aac70efa50c1014e0e66a31a504cb22991dee171bed2d357a189b4280134a8abda8cb971899dc5909258aa02caa91ccc923d76babfd2730b590bc9016663a3daea149326b75973c6a97db62b69c54eaba4e8392137309d087bde608a30b25a054e8a997ff023d9d8a1c44e19b4696bebd15b723afd7bf80245d7fd4e69eecbc297a6c7a9f9dd1b280d2931920799cca97a0b14f115d4b94a9f24cb1537f2c8336a12720d19083f661c6b05f4ff972f4ff48a470e4e6c44b9a9c4c062ea1fc184155f40987997d6f23ae8003bbed91eca5300ba91f0de82b167dbf06b642718278bfd8b4ae8534442f3b6d05d0d1a896e629ea11cc63d49a06b884bcc599eb49aef90be60bcd4a9f6ec32d388b65ff7224d3082c651f80b33716e2d9e43a954551a6f077d8e29919a5e52b8b1232605fe3143073602dab1d30764b6c08e946de0710bfc1d370bca61b55165860fe00468d5e040229782e93c2fc94489126bfed37df6664860aa4f274d4fcb6bdaef0d3a34b06b3267531017dfbef4cecab3f4dbfb12be3f36170b5363d180526dd3431bf9906a2022ae2590a9fc158d6b4df796c49fd1022074c6c22e8667f5f86ae9e3d6cb997579ce37153ef0c15ef521d63c5ca14a25b414c53a625296f9a2165099a2a1b3bc711abbba396c08a9a12bd343665c5c5759f64f7e025bd9ed7e21ffba599e1d31a9c6024663b89669dcec1ccffb244a227d1e29cd18085713d1898299ae8b4fd666d12b9361cba8af0b80d0c7fc01c8e944035ff2342aae0136a769520102461abb5b04f6853e9e0db2a1c6fb4a89f6a428ca96ecf6db2e2c880fd710c72c17c542f3786d304e9b2382ec580b0b0087132a2448258de951ad966897d0f9dd9d07c52005aa5963edbf6aa033ad1d4e18d2f74a0f86587197a1d32916a567b274a85e3968fbe6af6e75e18178628cb645b6db8ea0e80e773f90203a3b510763100a11429cb36aef2c637386ed6834a96fcdefbed4f416d6d3faf09d52528070a2139de399a4df64ec6339aabd99f77c923a659617352c5decc08413f7fcfb5134628d078b27d8b9c681ad61f52281fd850d2c1d3709e6d81bec9509d61b54304f116ce4a481526bf4ca15b7329dd10596972f4e7aa0a85acd953f7a36b347d3afe2e607239852f696ebcd26c579d5a120bea4c99940dc43461f421aa0c04522fa4e240bcc2cf7293b862f27b45b6a557878a21ac1c7949a3a0551a34d887eaac5a501bdbba4e2e73648539f1108d2b5067f070cfba7809ac7a557ae23a614a1361d9eae76dc4c0c7e3d1a7a0bf24fbd4c5d0fef260ea11d0ccd4725774a1af4628ceba8c8bd89ec5ab4c11f1fff58eaf9d5a822ecdf90b1519fb9253e42502e3669e6686118830914227d0da4fea2b3425ca2098106ff731999e28f5f530fd39660744482bd77123105f807234415ec7cf2dd640444a683c4f47ec7ed19f90e786723877fb60c14adf39687c4f647cd7da225b636ae7733fb7663c8e76e3e2ab9d4b7fc3ac8fb1f3c0e8781634860a84da514dbc735d9a56de4c0e26d5068890d353784712d1c87143c8f511704e8d0bb69e05fa74e37321518d1c17eb208e00b7407c46f4d24be80fd4718840828e3201ca26622ff5d44061c63fd9d9f65d5c34d03ae75a082c31b6174fac3975e1d3d3c6c775c2cdbf302183ea958e9c002dd27856a592f5a6d2040e941ab261793cbc6b3592d32940b3977003f62cfa848085756047bea7550270db3c66a040f191b53fbc0cc5c3946d2691d4d34ee002e827d2ef265d6fcb0d1fd1a7a62b7b915f5df61a5a4fa23bb432fe606d0fcfc08c6673d9bac66a8c000043010001fa227bae1e9f2a9d2594bc8439e39e7f56c265167cae3790f9e5446f53145eb2d6ec06c555d966bb9b2169871eab8d89d33e0a4d98873ae4d1723b5054917ee3fdad0b60240000000000000001713f00ad59c8cfc29b52deb574351f9394999ffa4dbce9edc37901ed7d92c105302e9ad8eb8439c8a83942bf9ee2c7a0791669ee808332f9e40e300799b8ee77604ae94a3ecc8890c0ce3baae7d3d39faec82995d09ad9b9bfd6373cae3c9087a198169c2541a121567f9a82759700e22816c8cdedc3d144e9ee22b6b9aa6817b43c282e4bafe066cd432e1d9e558dbcaf32c24a3c0f34e0296ddbadb3631a4c2f252a358819b66d23c339eb69d6ecaf7972afab1de488cfcbee4a4d53472ce9025e9e7e18269096b0395a903fb87000308dc3a89cdd75ee01a3ab3eb6d88c9b42a0f66052582b93c9322b89c613c3a8a7c6a2917fe3c169e7d4ce020a8f58380b83e4383db8669804a49cd91918fd56b41edae66df64648677de7a8133bcbbf0096907d04c92b4cf6c389800f90a58e3af6350d310cff5096d52df4016d76804876431a212b31e0d90cbafc33e6803ee2db4dc485a4f20be94d9f27d9e824b2b9d67f852d78ec30e6a6559f001b3699ecb7265977fe0cfcdd02a4037b0655d972d819cbd250dba86348f93255061dba7409bccaf8a89bca08bf3b1a3fc206e78e48d87a9a7423f1e49445bb73bfbc4a91ea2b47f34ff55be9157b3d8a4639d24468359e2083a5b7c82ca1ebbcd9b777d50650ec8f92335de253a4e2a729f446cc8308f7d89341875db3e4b2aef038c13bfac1f78ee35f829ba7e1241e7d3ebaf7064a2c99b9ce2aaa10f526140d593c8b2255fd32d252a55487ad2ca5619c794036bf9911a244dd42666e4621eda0efc4beb998cf079af1116576bbda85afd6e1466faa59690eb218db890e9edf5df42a1adbfcf97150b279d4e23f5f4b7892a9faf6fe39f15f5356c437a269ec1fe9a49acc48d4a6e76c73e2078abf2ec091f81e640e503892422157050822856ffed87cc3f25a610963d89a910656363fab3e6940805a5afc7f83064eeb110dc19b76a6309345732fa5c55d33b20c97e5715a124358ce71cca0e8aba4a3390c6abb48db8f3b6737dada28d7bad58be50791f93d6ccaeb48cb15f41a370c5c3fecc0b809bed3f68f780a40d5dada80e60db91ab036ed8fe45f4cf1634ebabced3cce51f3d8cdef769e5fbdeadfd6e6832478e7f5b1f9c0417ad635981b331fc909abbceca5748c69bda26e35b96dd4d6085f63ae92f3e212129cf0fb705d87dd531f6e2ace94ace1ac1a0f0b15511f8147c958cab539776a542b2c7c534319239b5b0096f984c161043de0254d3c236bbf85163a2fe8ff2afc4efca87e02345941faac21b78dbbe577cbe5782748a6e3a45dff992794484afaac3580da570642d881a7c048eeaae81fa3bdbbe7ce8faeca26895358448d045bbe6ed21f6c193306846ad38ccce54b2f39aa4c9e012ac0b3e1c696a314ff85292e8c63a7cb3f418caed2dbed9c98042b23ada80c45fb8bff202807eae108d5e7c724f840777d8ced9b281fcaa61020bc360a6c9405206340e1243b587a6e18533e894af916c3af9e7e3ef995ada0ed92b67db0a7abf05bb4ed48e75d74ef2cfff01b44a9e2691fa3996abd9c7c3c3299efe901d09ede0299f03a62df7b9eb59169064adc7d8a50405cb66f741a08e8d1973a543544a5c6f546bfc6169a500f880a1f1854b80668f0f1f30447f2daa70639a9b301e0ce7b7c7412ae2460d0c35d3009a47f5dc587926ad579d9ca2e590c949b999c0e8554f8b1afd28c4b1efc5e705725682725766067dd05376052e396735dba37b9dcf242b8ee9f7d96eafcc68343892c2642dbf14221ce90e63aefb70c717fc67d00552bc408d74178dadfa19091a0ad68c0be7b18528d6f6002e59eee69722a43c98936fc8192ff7d16256af94fea7c668c6b06e6a21e25f1db78f2f6f9d21e3a3f9784392774feccbbcdbdc34c2345bfce119640aa74d9c7663a8459d3d2cfbf8f3139a0860f9b872a5b9419c0c268f3a890d3b0c274c43fca81ba4cafbe3fa8230432ec43ec6c7bec334074ac4d98fd6ab8a3012796c953dca244b7fd0cff0788797df171d28ce38e3d4f464bcd63dfaacdef2f2e39da4d111ed7e9ef9eda887e1da690a3b12f77db4c459a9ee8cfbf5ba2f5df2865c5c540c9789654a7fe3bf9d05df4e2dc4637e66e09208bcc79a3c05b6adb769336973773d39cfe4140b574fefb46acca6b6a9f4708c2379cad8364c7c06a6a55fded16fb704d88b0db9b9ef1a4d5a6c00b70978485c5816a7db4946c1979a0ce24c13bdfc5ba13dd715cbbb0611d200a66b78db7cc80d25a3be995afa4d20263b0b79d661f1a016ea98d0ecd17753033c91e70bb5b4786eb3748eba3f3d948e7d09e728366c61a46f2d6bcf595a9cce2c68808c22e319b9e11d085ceb27794fba0d26244267a23a7260f50b824cd7f69dd28c7bc5568eee72d70a482c249f10216fdf2fa764007555cdc447588c89bdcb228f0a8259667ae3f40d2ebd9567efde7d1c785077332c17afaf69317cd4e3b4ffc1401afaefac9ad2578204740c1f8b4f1b4e1e1ba6b68d43512867bdd73ead3c1ef7d1ca78825876f144fb8df5a6ff3d97d3efc8389e35c55e1d6707aabe9de76c79f9889600440b23fea2fe4f2849131cfb55e7759dec1c90f882eb2175297598dd8e0cfbc3fdb20a8a917d2aa2d5e22a28371083772571ba7a604ea8f64715b4a7fdf236537a81f93d0ee62b167e79e71dd6c883db3daaf28d940b945bcf6002dcf2dce7d48ee12989cc078b654210e2a566f740cf1fbf4c377a3412ff959c79c6eab392f823f8e3161ead08193cd426bb7ab2c327e2e8e77d810479ff6ebe289a51b1b0201f3b81a43b9d72fc24d0073113561ff7a6b22b3fff290715c6866e9d705c77440075886e6844da9718beca169d23fd37d7a3f742ecf153b8ad171ea5a11d7dba0f987a3c76b0a6e9b959596e314fea6ffc82742dcc5472322dd9ae31d41e82a15918581430ceb7088b5dcb4c6b4408245e41ac1b3ede0e41d482555582edcb50497cf50418cab630f75b4f652cbe99ce01d047141efc983a184235a9b05eafd43e00899eded8d0a7e828f47f648cc7b2b325e55d73087da808811f8bd6f69d3ca01b2f0a521c1dc9f5d1f34c78fa2f9d343c7a64ec7c2364facf25b1a971c61664c4080f63d136623d1c58eba09d656b8abd3b397a7c53a2f220cd95b356d86e2e7fb3d1d924245af81cbe3c30595b807c567a63db232ac648434264535608e76559fe1f5963d1015cef9755802144cbf9a13e89f405559f0ffe66d18418e5501038394320fa0d41271e505e65a87f805872a38e72707530b4912571aa22bec6bf885867535b007f92a758c38a0446ee0215bb7c9240b0102b5368291a66773cc3d471780c55b9a73792fc79ffaf6f00833d011054bff0601305dfc917b8755b27af4b1114e3a0a151772ddab8909e95ba506b8aa329a25c59fd2d6033ed3e76f43ed6c584a77e78e3f9b1d4cb21514618018334386477513408d02f65b31ebccacce6a79ad376214e4a34e305017f2b43d29aa78bd34018bd66b87e3cdc5b1deb8fe174ca8d3405d412d1cf07c6d5c47192e05d9c79446e7a37dc18ab998bab29619f2a031ba3adebadbd6c58c90be0c96a8daa9274a732a3c29a55802fe6892d0589565e38f55fae6ff3f816c75178e59e9e7c2b1e3543062d63e3308ec266bbd44eff409b4117486f6f355fbb5459e16981d7598945edd8dc18c6d164fcb4080a9cf3461d73dcfb36baf889f3d79f1c2f0c9969b5e1e4f34287fe61345a0f7c91e1bad1e9d02ad0ec4c3abfc0efd5b0c7af1757924197089959afd6d990ec23f6d3065c06e49a346144d3aad490e65e6a4a65685d01f91c443787d888d735b9cdeacc54885cf9a4d84f174e7548eca9f32cf7898ae872f8e432183870669b0ac9d541610eddc623a8e33fca46d72cdc502b4496c79e7d8a95fec791fa0f6949b2497acefff1272cedbb13080909a98bd06e0533a2637eaa59e6f0bdf5a59bb28a5b42571b6cc96a5adff4e0fd0024608e362f73f8b183720509461c312cb56e5978db2f24b1800654176268ac0f00e3c0c5247935decfaf0793761470adab21a634f7a6288ab8781644b513c49d4665a0baf0b7052acd0a01019438a366c3e1eaa4184d08abb49157c91c8804b7176aa81e1b63f8e5b63654bef79e00e548b4e23fe65a2d987162cf72826aeaf76678889aeb9aecfc7953d';
const walletUtxoList = [
  {
    bip32Path: "m/44'/1776'/218'/0/0",
    txid: 'ba998e1e646cc3dfb47692a3835d5c1f48815d469f2dd8a9cf232238876e41cc',
    vout: 1,
    amount: 100000000000,
    valueCommitment: '',
    redeemScript: '',
    pubkey: '03471124179e56af1eb682a268d277a8768805d6d7c6ca119ebc5839ffe3995852'
  }
];
const authorizationSignature = '3044022040d127426a95dfe5a60ad958a1efe6aa14ac3d22ed3ecc5b4b59cb395e5aae4c022031aa9ee98dd9f96d560dfbaea68a8c85e15972db6ff210810040f30920cf73f1';

document.body.addEventListener("dblclick", async () => {
  $main.innerHTML = initial;
  try {
    // const transport = await TransportWebUSB.create();
    // transport.setDebugMode(true);
    //const appBtc = new AppBtc(transport);
    const h21 = document.createElement("h2");
    const h22 = document.createElement("h2");
    const h23 = document.createElement("h2");
    const h24 = document.createElement("h2");

    const networkType = 'liquidv1';
    const liquidLib = new LedgerLiquidWrapper(networkType);
    const connRet = await liquidLib.connect(0);
    if (!connRet.success) {
      throw Error(connRet.errorMessage);
    }

    const lastConnInfo = liquidLib.getLastConnectionInfo();
    console.log(lastConnInfo);

    const { version, name } = await liquidLib.getApplicationInfo();
    $main.innerHTML = `<h1>${name}: v${version.major}.${version.minor}.${version.patch}</h1>`;

    const { publicKey } = await liquidLib.getWalletPublicKey("44'/0'/0'");
    h21.textContent = 'pubkey: ' + publicKey;
    $main.appendChild(h21);


    h24.textContent = '';
    isDumpSignature = true;
    setTimeout(async () => {
      await dumpSignatureProgress(liquidLib, h24);
    }, 500);

    const { xpubKey } = await liquidLib.getXpubKey("44'/0'/0'");
    h22.textContent = 'xpub: ' + xpubKey;
    $main.appendChild(h22);

    const calcInfo = liquidLib.calcSignatureProgress(
        proposalTx, walletUtxoList);
    if (calcInfo.success) {
      console.log(`sign utxo count = ${calcInfo.analyzeUtxo.total}`);
      console.log(`tx in/out/issuance count = ${calcInfo.inputTx.total}`);
    } else {
      console.log('calcSignatureProgress:', calcInfo);
    }

    h23.textContent = 'getSignature requested.';
    $main.appendChild(h23);
    $main.appendChild(h24);
    const signatureResult = await liquidLib.getSignature(proposalTx,
        walletUtxoList, authorizationSignature);
    h23.textContent = 'getSignature success.';
    h24.textContent = '';

    console.log('signatureResult:', JSON.stringify(signatureResult, (key, value) =>
            typeof value === 'bigint' ? value.toString() : value, '  '));
    isDumpSignature = false;
    // await appBtc.getWalletPublicKey("44'/0'/0'/0/0", true);
    return false;
  } catch (e) {
    isDumpSignature = false;
    const $err = document.createElement("code");
    $err.style.color = "#f66";
    $err.textContent = String(e.message || e);
    $main.appendChild($err);
    console.log(e);
  }
});
